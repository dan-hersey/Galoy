<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Bitcoin-Backed Lending Portfolio Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
          body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
          input[type="range"] { -webkit-appearance: none; appearance: none; height: 8px; border-radius: 4px; background: #e5e7eb; }
          input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%; background: #1e3a5f; cursor: pointer; }
          input[type="range"]::-moz-range-thumb { width: 18px; height: 18px; border-radius: 50%; background: #1e3a5f; cursor: pointer; border: none; }
          .bar { transition: width 0.3s ease; }
        </style>
  </head>
  <body class="bg-gray-50 min-h-screen p-6">
      <div class="max-w-7xl mx-auto mb-8">
            <h1 class="text-3xl font-bold mb-2" style="color: #1e3a5f">Bitcoin-Backed Lending Portfolio Analysis</h1>h1>
            <p class="text-gray-600">Interactive model showing the impact of bitcoin-backed loans on portfolio net interest income</p>p>
            <div class="mt-3 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700">
                    Conservative assumptions - No price speculation - Collateral-secured lending only
            </div>div>
      </div>div>

      <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-1 bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h2 class="text-lg font-semibold mb-6" style="color: #1e3a5f">Model Inputs</h2>h2>

                    <div class="mb-6">
                              <div class="flex justify-between items-baseline mb-2">
                                          <label class="text-sm font-medium text-gray-700">Total Loan Book Size</label>label>
                                          <span id="loanBookDisplay" class="text-lg font-semibold" style="color: #1e3a5f">$1.00B</span>span>
                              </div>div>
                              <input type="range" id="loanBook" min="100000000" max="10000000000" step="100000000" value="1000000000" class="w-full cursor-pointer" oninput="updateCalculations()">
                              <div class="flex justify-between text-xs text-gray-400 mt-1"><span>$100M</span><span>$10B</span></div>div>
                    </div>div>
            
                  <div class="mb-6">
                          <div class="flex justify-between items-baseline mb-2">
                                    <label class="text-sm font-medium text-gray-700">Bitcoin Loan Allocation</label>label>
                                    <span id="btcAllocDisplay" class="text-lg font-semibold" style="color: #1e3a5f">5%</span>
                          </div>div>
                          <p class="text-xs text-gray-500 mb-2">Percentage of loan book allocated to bitcoin-backed loans</p>p>
                          <input type="range" id="btcAlloc" min="0" max="25" step="0.5" value="5" class="w-full cursor-pointer" oninput="updateCalculations()">
                          <div class="flex justify-between text-xs text-gray-400 mt-1"><span>0%</span><span>25%</span></div>div>
                  </div>div>
            
                  <div class="border-t border-gray-200 my-6 pt-6">
                          <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-4">Interest Rates</p>p>
                  
                          <div class="mb-6">
                                    <div class="flex justify-between items-baseline mb-2">
                                                <label class="text-sm font-medium text-gray-700">Traditional Loan Rate</label>label>
                                                <span id="tradRateDisplay" class="text-lg font-semibold" style="color: #1e3a5f">6.00%</span>
                                    </div>div>
                                    <input type="range" id="tradRate" min="3" max="12" step="0.25" value="6" class="w-full cursor-pointer" oninput="updateCalculations()">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1"><span>3%</span><span>12%</span></div>div>
                          </div>div>
                  
                          <div class="mb-6">
                                    <div class="flex justify-between items-baseline mb-2">
                                                <label class="text-sm font-medium text-gray-700">Bitcoin-Backed Loan Rate</label>label>
                                                <span id="btcRateDisplay" class="text-lg font-semibold" style="color: #1e3a5f">10.00%</span>
                                    </div>div>
                                    <input type="range" id="btcRate" min="6" max="18" step="0.25" value="10" class="w-full cursor-pointer" oninput="updateCalculations()">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1"><span>6%</span><span>18%</span></div>div>
                          </div>div>
                  </div>div>
            
                  <div class="border-t border-gray-200 my-6 pt-6">
                          <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-4">Risk Parameters</p>p>
                  
                          <div class="mb-6">
                                    <div class="flex justify-between items-baseline mb-2">
                                                <label class="text-sm font-medium text-gray-700">Bitcoin Loan LTV</label>label>
                                                <span id="ltvDisplay" class="text-lg font-semibold" style="color: #1e3a5f">50%</span>
                                    </div>div>
                                    <p class="text-xs text-gray-500 mb-2">Lower LTV = higher collateral buffer</p>p>
                                    <input type="range" id="ltv" min="30" max="70" step="5" value="50" class="w-full cursor-pointer" oninput="updateCalculations()">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1"><span>30%</span><span>70%</span></div>div>
                          </div>div>
                  
                          <div class="mb-6">
                                    <div class="flex justify-between items-baseline mb-2">
                                                <label class="text-sm font-medium text-gray-700">Cost of Funds</label>label>
                                                <span id="cofDisplay" class="text-lg font-semibold" style="color: #1e3a5f">3.5%</span>
                                    </div>div>
                                    <input type="range" id="cof" min="1" max="6" step="0.1" value="3.5" class="w-full cursor-pointer" oninput="updateCalculations()">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1"><span>1%</span><span>6%</span></div>div>
                          </div>div>
                  
                          <div class="mb-6">
                                    <div class="flex justify-between items-baseline mb-2">
                                                <label class="text-sm font-medium text-gray-700">Traditional Loan Loss Rate</label>label>
                                                <span id="lossDisplay" class="text-lg font-semibold" style="color: #1e3a5f">0.5%</span>
                                    </div>div>
                                    <p class="text-xs text-gray-500 mb-2">Bitcoin loans assumed 0% loss (over-collateralized)</p>p>
                                    <input type="range" id="lossRate" min="0" max="3" step="0.1" value="0.5" class="w-full cursor-pointer" oninput="updateCalculations()">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1"><span>0%</span><span>3%</span></div>div>
                          </div>div>
                  </div>div>
            
                  <div class="bg-gray-50 rounded-lg p-4 mt-4">
                          <p class="text-xs text-gray-600"><strong>Key Assumption:</strong> Bitcoin-backed loans are over-collateralized at <span id="ltvNote">50</span>% LTV with automated margin calls, resulting in near-zero credit losses.</p>p>
                  </div>div>
            </div>div>
      
          <div class="lg:col-span-2 space-y-6">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h2 class="text-lg font-semibold mb-4" style="color: #1e3a5f">Portfolio Impact Summary</h2>h2>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                  <div class="p-4 rounded-lg border border-gray-200 bg-white">
                                              <p class="text-sm text-gray-600 mb-1">Current Portfolio NII</p>p>
                                              <p id="currentNII" class="text-2xl font-bold" style="color: #1e3a5f">$20.00M</p>p>
                                              <p class="text-xs text-gray-500 mt-1">100% traditional loans</p>p>
                                  </div>div>
                                  <div class="p-4 rounded-lg border" style="border-color: #3b82f6; background-color: #eff6ff">
                                              <p class="text-sm text-gray-600 mb-1">New Portfolio NII</p>p>
                                              <p id="newNII" class="text-2xl font-bold" style="color: #1e3a5f">$21.03M</p>p>
                                              <p id="newNIILabel" class="text-xs text-gray-500 mt-1">5% bitcoin allocation</p>p>
                                  </div>div>
                                  <div class="p-4 rounded-lg border" style="border-color: #3b82f6; background-color: #eff6ff">
                                              <p class="text-sm text-gray-600 mb-1">Incremental NII</p>p>
                                              <p id="incNII" class="text-2xl font-bold" style="color: #1e3a5f">$1.03M</p>p>
                                              <p id="incNIIPct" class="text-sm mt-1 text-green-600">+5.13%</p>p>
                                  </div>div>
                                  <div class="p-4 rounded-lg border border-gray-200 bg-white">
                                              <p class="text-sm text-gray-600 mb-1">Yield Uplift</p>p>
                                              <p id="yieldUplift" class="text-2xl font-bold" style="color: #1e3a5f">+20.0bps</p>p>
                                              <p id="blendedYield" class="text-xs text-gray-500 mt-1">Blended yield: 6.20%</p>p>
                                  </div>div>
                        </div>div>
                </div>div>
          
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                  <h3 class="text-sm font-semibold mb-4" style="color: #1e3a5f">Net Interest Income Comparison</h3>h3>
                                  <div class="space-y-4">
                                              <div>
                                                              <div class="flex justify-between text-sm mb-1">
                                                                                <span class="text-gray-600">Current Portfolio</span>
                                                                                <span id="chartCurrent" class="font-medium">$20.00M</span>
                                                              </div>
                                                              <div class="h-8 bg-gray-100 rounded-lg overflow-hidden">
                                                                                <div id="barCurrent" class="bar h-full rounded-lg" style="width: 95%; background-color: #94a3b8"></div>
                                                              </div>
                                              </div>
                                                <div>
                                                                <div class="flex justify-between text-sm mb-1">
                                                                                  <span class="text-gray-600">With Bitcoin Allocation</span>
                                                                                  <span id="chartNew" class="font-medium">$21.03M</span>
                                                                </div>
                                                                <div class="h-8 bg-gray-100 rounded-lg overflow-hidden">
                                                                                  <div id="barNew" class="bar h-full rounded-lg" style="width: 100%; background-color: #1e3a5f"></div>
                                                                </div>
                                                </div>
                                  </div>
                        </div>

                          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                      <h3 class="text-sm font-semibold mb-4" style="color: #1e3a5f">Portfolio Yield by Allocation</h3>h3>
                                      <div class="h-48 flex items-end justify-between gap-2" id="yieldChart"></div>
                                      <div class="flex justify-between text-xs text-gray-500 mt-2">
                                                    <span>0%</span><span>5%</span><span>10%</span><span>15%</span><span>20%</span>
                                      </div>
                          </div>
                </div>
          
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-sm font-semibold mb-4" style="color: #1e3a5f">Sensitivity Analysis: Impact at Different Allocation Levels</h3>h3>
                        <div class="overflow-x-auto">
                                  <table class="w-full">
                                              <thead>
                                                              <tr class="border-b border-gray-200">
                                                                                <th class="text-left py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">Bitcoin Allocation</th>th>
                                                                                <th class="text-right py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">Bitcoin Loans</th>th>
                                                                                <th class="text-right py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">Portfolio NII</th>th>
                                                                                <th class="text-right py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">Incremental NII</th>th>
                                                                                <th class="text-right py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">Net Yield</th>th>
                                                                                <th class="text-right py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wide">Yield Uplift</th>th>
                                                              </tr>tr>
                                              </thead>
                                                <tbody id="sensitivityTable"></tbody>tbody>
                                  </table>table>
                        </div>
                </div>

                  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-sm font-semibold mb-4" style="color: #1e3a5f">Portfolio Composition</h3>h3>
                            <div class="h-8 rounded-lg overflow-hidden flex">
                                        <div id="tradBar" class="h-full transition-all duration-300" style="width: 95%; background-color: #94a3b8"></div>
                                        <div id="btcBar" class="h-full transition-all duration-300" style="width: 5%; background-color: #1e3a5f"></div>
                            </div>
                            <div class="flex justify-between mt-2 text-xs text-gray-600">
                                        <span id="tradLabel">Traditional: $950.00M (95.0%)</span>
                                        <span id="btcLabel">Bitcoin-Backed: $50.00M (5.0%)</span>
                            </div>
                  </div>

                  <div class="bg-gray-100 rounded-xl p-4 text-xs text-gray-600">
                            <p class="font-semibold mb-2">Model Assumptions and Notes:</p>p>
                            <ul class="space-y-1 list-disc list-inside">
                                        <li>Bitcoin-backed loans are fully collateralized at <span id="ltvFooter">50</span>% LTV with automated liquidation protocols</li>
                                      <li>Credit losses on bitcoin-backed loans assumed to be 0% due to over-collateralization</li>
                                      <li>No bitcoin price speculation or volatility modeling included</li>
                                      <li>Interest rates and cost of funds assumed constant for the analysis period</li>
                                      <li>This model is for illustrative purposes only and does not constitute financial advice</li>
                            </ul>ul>
                  </div>
          </div>
      </div>
  
    <script>
          function formatCurrency(value) {
                  if (value >= 1e9) return '$' + (value / 1e9).toFixed(2) + 'B';
                  if (value >= 1e6) return '$' + (value / 1e6).toFixed(2) + 'M';
                  if (value >= 1e3) return '$' + (value / 1e3).toFixed(0) + 'K';
                  return '$' + value.toFixed(0);
          }

          function updateCalculations() {
                  const loanBook = parseFloat(document.getElementById('loanBook').value);
                  const btcAlloc = parseFloat(document.getElementById('btcAlloc').value);
                  const tradRate = parseFloat(document.getElementById('tradRate').value);
                  const btcRate = parseFloat(document.getElementById('btcRate').value);
                  const ltv = parseFloat(document.getElementById('ltv').value);
                  const cof = parseFloat(document.getElementById('cof').value);
                  const lossRate = parseFloat(document.getElementById('lossRate').value);

                  document.getElementById('loanBookDisplay').textContent = formatCurrency(loanBook);
                  document.getElementById('btcAllocDisplay').textContent = btcAlloc + '%';
                  document.getElementById('tradRateDisplay').textContent = tradRate.toFixed(2) + '%';
                  document.getElementById('btcRateDisplay').textContent = btcRate.toFixed(2) + '%';
                  document.getElementById('ltvDisplay').textContent = ltv + '%';
                  document.getElementById('cofDisplay').textContent = cof.toFixed(1) + '%';
                  document.getElementById('lossDisplay').textContent = lossRate.toFixed(1) + '%';
                  document.getElementById('ltvNote').textContent = ltv;
                  document.getElementById('ltvFooter').textContent = ltv;

                  const btcAllocDec = btcAlloc / 100;
                  const tradAllocDec = 1 - btcAllocDec;

                  const currentGross = loanBook * (tradRate / 100);
                  const currentFunding = loanBook * (cof / 100);
                  const currentLosses = loanBook * (lossRate / 100);
                  const currentNII = currentGross - currentFunding - currentLosses;
                  const currentYield = (currentNII / loanBook) * 100;

                  const btcLoanAmt = loanBook * btcAllocDec;
                  const tradLoanAmt = loanBook * tradAllocDec;
                  const btcGross = btcLoanAmt * (btcRate / 100);
                  const tradGross = tradLoanAmt * (tradRate / 100);
                  const newGross = btcGross + tradGross;
                  const newFunding = loanBook * (cof / 100);
                  const newLosses = tradLoanAmt * (lossRate / 100);
                  const newNII = newGross - newFunding - newLosses;
                  const newYield = (newNII / loanBook) * 100;

                  const incNII = newNII - currentNII;
                  const incPct = (incNII / currentNII) * 100;
                  const yieldUplift = (newYield - currentYield) * 100;
                  const blendedYield = (btcAllocDec * btcRate) + (tradAllocDec * tradRate);

                  document.getElementById('currentNII').textContent = formatCurrency(currentNII);
                  document.getElementById('newNII').textContent = formatCurrency(newNII);
                  document.getElementById('newNIILabel').textContent = btcAlloc + '% bitcoin allocation';
                  document.getElementById('incNII').textContent = formatCurrency(incNII);
                  document.getElementById('incNIIPct').textContent = '+' + incPct.toFixed(2) + '%';
                  document.getElementById('yieldUplift').textContent = '+' + yieldUplift.toFixed(1) + 'bps';
                  document.getElementById('blendedYield').textContent = 'Blended yield: ' + blendedYield.toFixed(2) + '%';

                  const maxNII = Math.max(currentNII, newNII);
                  document.getElementById('chartCurrent').textContent = formatCurrency(currentNII);
                  document.getElementById('chartNew').textContent = formatCurrency(newNII);
                  document.getElementById('barCurrent').style.width = ((currentNII / maxNII) * 100) + '%';
                  document.getElementById('barNew').style.width = ((newNII / maxNII) * 100) + '%';

                  document.getElementById('tradBar').style.width = (100 - btcAlloc) + '%';
                  document.getElementById('btcBar').style.width = btcAlloc + '%';
                  document.getElementById('tradLabel').textContent = 'Traditional: ' + formatCurrency(tradLoanAmt) + ' (' + (100 - btcAlloc).toFixed(1) + '%)';
                  document.getElementById('btcLabel').textContent = 'Bitcoin-Backed: ' + formatCurrency(btcLoanAmt) + ' (' + btcAlloc + '%)';

                  const yieldChart = document.getElementById('yieldChart');
                  yieldChart.innerHTML = '';
                  const allocations = [0, 5, 10, 15, 20];
                  const yields = allocations.map(function(a) {
                            const bDec = a / 100;
                            const tDec = 1 - bDec;
                            const bAmt = loanBook * bDec;
                            const tAmt = loanBook * tDec;
                            const bG = bAmt * (btcRate / 100);
                            const tG = tAmt * (tradRate / 100);
                            const tInc = bG + tG;
                            const fC = loanBook * (cof / 100);
                            const lC = tAmt * (lossRate / 100);
                            const nii = tInc - fC - lC;
                            return (nii / loanBook) * 100;
                  });
                  const maxYield = Math.max.apply(null, yields);
                  const minYield = Math.min.apply(null, yields);
                  const range = maxYield - minYield || 1;

                  allocations.forEach(function(a, i) {
                            const bar = document.createElement('div');
                            bar.className = 'flex-1 rounded-t transition-all duration-300';
                            const height = 20 + ((yields[i] - minYield) / range) * 80;
                            bar.style.height = height + '%';
                            bar.style.backgroundColor = a === btcAlloc ? '#1e3a5f' : '#94a3b8';
                            bar.title = a + '% allocation: ' + yields[i].toFixed(2) + '% yield';
                            yieldChart.appendChild(bar);
                  });

                  const tbody = document.getElementById('sensitivityTable');
                  tbody.innerHTML = '';

                  const baseRow = document.createElement('tr');
                  baseRow.className = 'border-b border-gray-100 bg-gray-50';
                  baseRow.innerHTML = '<td class="py-3 px-4 text-sm text-gray-600">0% (Baseline)</td><td class="py-3 px-4 text-sm text-right text-gray-600">$0</td><td class="py-3 px-4 text-sm text-right font-medium">' + formatCurrency(currentNII) + '</td><td class="py-3 px-4 text-sm text-right text-gray-500">-</td><td class="py-3 px-4 text-sm text-right font-medium">' + currentYield.toFixed(2) + '%</td><td class="py-3 px-4 text-sm text-right text-gray-500">-</td>';
                  tbody.appendChild(baseRow);

                  [1, 5, 10, 20].forEach(function(alloc) {
                            const bDec = alloc / 100;
                            const tDec = 1 - bDec;
                            const bAmt = loanBook * bDec;
                            const tAmt = loanBook * tDec;
                            const bG = bAmt * (btcRate / 100);
                            const tG = tAmt * (tradRate / 100);
                            const tInc = bG + tG;
                            const fC = loanBook * (cof / 100);
                            const lC = tAmt * (lossRate / 100);
                            const nii = tInc - fC - lC;
                            const inc = nii - currentNII;
                            const yld = (nii / loanBook) * 100;
                            const uplift = (yld - currentYield) * 100;

                            const row = document.createElement('tr');
                            row.className = 'border-b border-gray-100';
                            if (alloc === btcAlloc) {
                                        row.style.backgroundColor = '#eff6ff';
                            }
                            const currentTag = alloc === btcAlloc ? '<span class="ml-2 text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full">Current</span>' : '';
                            row.innerHTML = '<td class="py-3 px-4 text-sm font-medium" style="color: #1e3a5f">' + alloc + '%' + currentTag + '</td><td class="py-3 px-4 text-sm text-right text-gray-600">' + formatCurrency(bAmt) + '</td><td class="py-3 px-4 text-sm text-right font-medium">' + formatCurrency(nii) + '</td><td class="py-3 px-4 text-sm text-right text-green-600 font-medium">+' + formatCurrency(inc) + '</td><td class="py-3 px-4 text-sm text-right font-medium">' + yld.toFixed(2) + '%</td><td class="py-3 px-4 text-sm text-right text-green-600 font-medium">+' + uplift.toFixed(1) + 'bps</td>';
                            tbody.appendChild(row);
                  });
          }

          updateCalculations();
    </script>
  </body>body>
</html>html>
    </script></li></li>
                                              </thead></span></span>
                                                </div>
                                              </div></strong></span></span>
    </style></title>
  </head>
